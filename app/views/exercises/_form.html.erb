<!-- app/views/exercises/_form.html.erb -->

<div class="pt-20 max-w-lg mx-auto p-6 bg-white shadow-md rounded-lg">
  <%= form_with model: [@muscle, @exercise], local: true, html: { multipart: true }, class: "w-full" do |form| %>
    <!-- Name Field -->
    <div class="mb-4">
      <%= form.label :name, "Exercise Name", class: "block text-gray-700 font-semibold mb-2" %>
      <%= form.text_field :name, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500", required: true %>
      <% @exercise.errors.full_messages_for(:name).each do |message| %>
        <div class="text-red-500 text-sm mt-1"><%= message %></div>
      <% end %>
    </div>

    <!-- Description Field -->
    <div class="mb-4">
      <%= form.label :description, class: "block text-gray-700 font-semibold mb-2" %>
      <%= form.text_area :description, rows: 5, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500", required: true %>
      <% @exercise.errors.full_messages_for(:description).each do |message| %>
        <div class="text-red-500 text-sm mt-1"><%= message %></div>
      <% end %>
    </div>

    <!-- GIF Attachment Field -->
    <div class="mb-4">
      <%= form.label :gif, "Upload GIF", class: "block text-gray-700 font-semibold mb-2" %>
      <%= form.file_field :gif, accept: "image/gif", class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" %>
      <% @exercise.errors.full_messages_for(:gif).each do |message| %>
        <div class="text-red-500 text-sm mt-1"><%= message %></div>
      <% end %>
      <% if @exercise.gif.attached? %>
        <p class="mt-2 text-sm text-gray-600">Current GIF:</p>
        <%= image_tag @exercise.gif, class: "mt-2 w-full h-48 object-cover rounded-md shadow-md" %>
      <% end %>
    </div>

    <!-- Form Actions -->
    <div class="flex justify-between items-center">
      <%= link_to 'Back', muscle_exercises_path(@muscle), class: "text-blue-500 hover:underline" %>
      <%= form.submit (@exercise.new_record? ? "Create Exercise" : "Update Exercise"), class: "bg-blue-500 text-white font-semibold px-4 py-2 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2" %>
    </div>
  <% end %>
</div>